pipeline {
    agent any

    stages {
        stage('Trigger jenkins1 and jenkins2') {
            steps {
                script {
                    // ──────────────────────────────────────────────────────
                    // Option A – Run them in parallel (recommended – faster)
                    // ──────────────────────────────────────────────────────
                    parallel {
                        stage('Run jenkins1') {
                            steps {
                                build job: 'jenkins1',
                                      wait: true,          // wait for it to finish
                                      propagate: true      // fail this pipeline if jenkins1 fails
                            }
                        }
                        stage('Run jenkins2') {
                            steps {
                                build job: 'jenkins2',
                                      wait: true,
                                      propagate: true
                            }
                        }
                    }

                    // ──────────────────────────────────────────────────────
                    // Option B – Run them one after another (uncomment if you prefer)
                    // ──────────────────────────────────────────────────────
                    /*
                    build job: 'jenkins1', wait: true, propagate: true
                    build job: 'jenkins2', wait: true, propagate: true
                    */
                }
            }
        }
    }

    post {
        success { echo 'Both jenkins1 and jenkins2 completed successfully!' }
        failure { echo 'At least one of the jobs failed.' }
    }
}
